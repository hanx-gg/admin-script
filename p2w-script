-- === P2W FULL SCRIPT ===
local player = game.Players.LocalPlayer
local UIS = game:GetService("UserInputService")
local runService = game:GetService("RunService")
local char = player.Character or player.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")

-- === FLY SYSTEM ===
local flying = false
local flyVelocity
local flyGyro

local function toggleFly(on)
	if on then
		if flying then return end
		flying = true
		local root = char:WaitForChild("HumanoidRootPart")
		
		flyVelocity = Instance.new("BodyVelocity")
		flyVelocity.MaxForce = Vector3.new(1e5, 1e5, 1e5)
		flyVelocity.Velocity = Vector3.zero
		flyVelocity.Parent = root

		flyGyro = Instance.new("BodyGyro")
		flyGyro.MaxTorque = Vector3.new(1e5, 1e5, 1e5)
		flyGyro.CFrame = root.CFrame
		flyGyro.P = 9e4
		flyGyro.Parent = root

		runService:BindToRenderStep("FlyControl", Enum.RenderPriority.Character.Value, function()
			local cam = workspace.CurrentCamera
			local moveDir = Vector3.zero
			if UIS:IsKeyDown(Enum.KeyCode.W) then moveDir += cam.CFrame.LookVector end
			if UIS:IsKeyDown(Enum.KeyCode.S) then moveDir -= cam.CFrame.LookVector end
			if UIS:IsKeyDown(Enum.KeyCode.A) then moveDir -= cam.CFrame.RightVector end
			if UIS:IsKeyDown(Enum.KeyCode.D) then moveDir += cam.CFrame.RightVector end
			if UIS:IsKeyDown(Enum.KeyCode.Space) then moveDir += cam.CFrame.UpVector end
			if UIS:IsKeyDown(Enum.KeyCode.LeftControl) then moveDir -= cam.CFrame.UpVector end

			flyVelocity.Velocity = moveDir.Unit * 100
			flyGyro.CFrame = cam.CFrame
		end)
	else
		flying = false
		runService:UnbindFromRenderStep("FlyControl")
		if flyVelocity then flyVelocity:Destroy() end
		if flyGyro then flyGyro:Destroy() end
	end
end

-- === UI CREATION ===
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "P2WGui"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 320, 0, 260)
frame.Position = UDim2.new(0, 40, 0.5, -130)
frame.BackgroundColor3 = Color3.fromRGB(250, 250, 250)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "ðŸ’° P2W Tab"
title.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Center

-- === FUNCTION: CREATE SLIDER ===
local function createSlider(name, min, max, default, posY, callback)
	local label = Instance.new("TextLabel", frame)
	label.Size = UDim2.new(0, 300, 0, 20)
	label.Position = UDim2.new(0, 10, 0, posY)
	label.BackgroundTransparency = 1
	label.Text = name .. ": " .. default
	label.TextColor3 = Color3.new(0, 0, 0)
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.TextXAlignment = Enum.TextXAlignment.Left

	local sliderBack = Instance.new("Frame", frame)
	sliderBack.Size = UDim2.new(0, 300, 0, 6)
	sliderBack.Position = UDim2.new(0, 10, 0, posY + 22)
	sliderBack.BackgroundColor3 = Color3.fromRGB(200, 200, 200)

	local sliderFill = Instance.new("Frame", sliderBack)
	sliderFill.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
	sliderFill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)

	local dragging = false

	local function update(input)
		local relX = math.clamp((input.Position.X - sliderBack.AbsolutePosition.X) / sliderBack.AbsoluteSize.X, 0, 1)
		sliderFill.Size = UDim2.new(relX, 0, 1, 0)
		local value = math.floor(min + (max - min) * relX)
		label.Text = name .. ": " .. value
		callback(value)
	end

	sliderBack.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			update(input)
		end
	end)

	UIS.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)

	UIS.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			update(input)
		end
	end)
end

-- === FUNCTION: CREATE TOGGLE BUTTON ===
local function createToggle(posY)
	local button = Instance.new("TextButton", frame)
	button.Size = UDim2.new(0, 300, 0, 30)
	button.Position = UDim2.new(0, 10, 0, posY)
	button.Text = "ðŸ›« Enable Fly"
	button.BackgroundColor3 = Color3.fromRGB(180, 255, 180)
	button.TextColor3 = Color3.new(0, 0, 0)
	button.Font = Enum.Font.GothamBold
	button.TextSize = 16

	local on = false

	button.MouseButton1Click:Connect(function()
		on = not on
		button.Text = on and "ðŸ›¬ Disable Fly" or "ðŸ›« Enable Fly"
		button.BackgroundColor3 = on and Color3.fromRGB(255, 100, 100) or Color3.fromRGB(180, 255, 180)
		toggleFly(on)
	end)
end

-- === CREATE SLIDERS ===
createSlider("WalkSpeed", 16, 100, humanoid.WalkSpeed, 40, function(v)
	humanoid.WalkSpeed = v
end)

createSlider("JumpPower", 50, 200, humanoid.JumpPower, 100, function(v)
	humanoid.JumpPower = v
end)

createToggle(160)
